<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shahzad Notes - Premium Educational Notes Marketplace</title>
    <!-- All CSS, JS, and libraries in one file -->
    
    <!-- Font Awesome Icons (CDN) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- PDF.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <!-- Razorpay Payment -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    
    <style>
        /* ==================== ALL CSS IN ONE PLACE ==================== */
        
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --light-color: #ecf0f1;
            --dark-color: #2c3e50;
            --text-color: #333;
            --border-color: #ddd;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            width: 90%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 15px;
        }

        /* Header */
        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: var(--shadow);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 2px solid var(--secondary-color);
        }

        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            text-decoration: none;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
        }

        .logo-text {
            font-size: 24px;
            font-weight: 800;
            color: var(--primary-color);
        }

        .logo-text span {
            color: var(--secondary-color);
        }

        .nav-links {
            display: flex;
            gap: 30px;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-color);
            font-weight: 600;
            font-size: 16px;
            padding: 8px 0;
            position: relative;
            transition: var(--transition);
        }

        .nav-links a:hover {
            color: var(--secondary-color);
        }

        .nav-links a.active {
            color: var(--secondary-color);
        }

        .nav-links a.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 3px;
            background: var(--secondary-color);
        }

        .user-section {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* Buttons */
        .btn {
            padding: 12px 28px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            outline: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--secondary-color), #2980b9);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(52, 152, 219, 0.3);
        }

        .btn-success {
            background: linear-gradient(135deg, var(--success-color), #219653);
            color: white;
        }

        .btn-success:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 15px rgba(39, 174, 96, 0.3);
        }

        .btn-outline {
            background: transparent;
            color: var(--secondary-color);
            border: 2px solid var(--secondary-color);
        }

        .btn-outline:hover {
            background: var(--secondary-color);
            color: white;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        /* Main Content */
        main {
            margin-top: 100px;
            padding-bottom: 80px;
        }

        .section {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .section.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Hero Section */
        .hero {
            text-align: center;
            padding: 60px 0;
            background: linear-gradient(rgba(255,255,255,0.9), rgba(255,255,255,0.9));
            background-size: cover;
            border-radius: 20px;
            margin-bottom: 40px;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .hero p {
            font-size: 1.2rem;
            color: var(--text-color);
            max-width: 800px;
            margin: 0 auto 30px;
        }

        /* Notes Grid */
        .notes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
            margin: 30px 0;
        }

        .note-card {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: var(--transition);
            border: 1px solid var(--border-color);
        }

        .note-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.15);
        }

        .note-header {
            padding: 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            position: relative;
        }

        .note-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .note-price {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            backdrop-filter: blur(5px);
        }

        .note-body {
            padding: 20px;
        }

        .note-description {
            color: #666;
            margin-bottom: 15px;
            height: 80px;
            overflow: hidden;
        }

        .note-footer {
            padding: 15px 20px;
            background: #f8f9fa;
            border-top: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        /* PDF Preview */
        .pdf-preview-container {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .pdf-preview-container.active {
            display: flex;
        }

        .pdf-preview {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 900px;
            height: 90vh;
            display: flex;
            flex-direction: column;
        }

        .pdf-header {
            padding: 20px;
            background: var(--primary-color);
            color: white;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 12px 12px 0 0;
        }

        .pdf-viewer {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }

        #pdf-canvas {
            width: 100%;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            border: 1px solid var(--border-color);
        }

        /* Payment Modal */
        .payment-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .payment-modal.active {
            display: flex;
        }

        .payment-content {
            background: white;
            border-radius: 12px;
            padding: 40px;
            width: 90%;
            max-width: 500px;
            text-align: center;
        }

        .qr-code-container {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        /* Upload Form */
        .upload-form {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            margin-top: 30px;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 16px;
            font-family: 'Poppins', sans-serif;
            transition: var(--transition);
        }

        .form-group input:focus,
        .form-group textarea:focus,
        .form-group select:focus {
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
            outline: none;
        }

        /* Chat Widget */
        .chat-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
        }

        .chat-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--success-color);
            color: white;
            border: none;
            font-size: 24px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
            transition: var(--transition);
        }

        .chat-button:hover {
            transform: scale(1.1);
        }

        /* Footer */
        footer {
            background: var(--primary-color);
            color: white;
            padding: 60px 0 30px;
            margin-top: 80px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h3 {
            font-size: 1.3rem;
            margin-bottom: 25px;
            color: white;
            font-weight: 700;
        }

        .contact-info {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .contact-item {
            display: flex;
            align-items: center;
            gap: 12px;
            color: rgba(255, 255, 255, 0.8);
        }

        .contact-item i {
            color: var(--secondary-color);
            font-size: 1.2rem;
            width: 24px;
        }

        .copyright {
            text-align: center;
            padding-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }

        /* Commission Badge */
        .commission-badge {
            position: fixed;
            top: 100px;
            right: 20px;
            background: linear-gradient(135deg, var(--warning-color), #e67e22);
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            box-shadow: var(--shadow);
            z-index: 999;
        }

        /* AI Chat Bot */
        .ai-chat-container {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
            flex-direction: column;
            z-index: 1001;
        }

        .ai-chat-container.active {
            display: flex;
        }

        .ai-chat-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 15px 20px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .ai-chat-body {
            height: 300px;
            overflow-y: auto;
            padding: 20px;
        }

        .ai-chat-input {
            padding: 15px;
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: 10px;
        }

        .ai-chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
        }

        /* Withdrawal System */
        .withdrawal-form {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: var(--shadow);
            max-width: 500px;
            margin: 30px auto;
        }

        .balance-display {
            text-align: center;
            margin-bottom: 30px;
        }

        .balance-amount {
            font-size: 3rem;
            font-weight: 800;
            color: var(--success-color);
            margin: 10px 0;
        }

        /* Notification System */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            background: white;
            border-radius: 8px;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 15px;
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 2000;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success {
            border-left: 5px solid var(--success-color);
        }

        .notification.error {
            border-left: 5px solid var(--accent-color);
        }

        .notification.info {
            border-left: 5px solid var(--secondary-color);
        }

        /* Fullscreen Mode */
        body.fullscreen {
            padding: 0;
            margin: 0;
        }

        body.fullscreen .container {
            max-width: 100%;
            padding: 0;
        }

        .fullscreen-btn {
            position: fixed;
            bottom: 30px;
            left: 30px;
            background: var(--primary-color);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: none;
            font-size: 20px;
            cursor: pointer;
            z-index: 999;
            box-shadow: var(--shadow);
        }

        /* Admin Dashboard */
        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            box-shadow: var(--shadow);
        }

        .stat-card h3 {
            font-size: 2rem;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                gap: 20px;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
            
            .hero h1 {
                font-size: 2.2rem;
            }
            
            .notes-grid {
                grid-template-columns: 1fr;
            }
            
            .pdf-preview {
                width: 95%;
                height: 80vh;
            }
            
            .ai-chat-container {
                width: 90%;
                right: 5%;
            }
        }

        /* Animation Delays for Cards */
        .note-card:nth-child(1) { animation-delay: 0.1s; }
        .note-card:nth-child(2) { animation-delay: 0.2s; }
        .note-card:nth-child(3) { animation-delay: 0.3s; }
        .note-card:nth-child(4) { animation-delay: 0.4s; }
        .note-card:nth-child(5) { animation-delay: 0.5s; }
        .note-card:nth-child(6) { animation-delay: 0.6s; }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 50px;
            height: 50px;
            border: 3px solid rgba(52, 152, 219, 0.3);
            border-radius: 50%;
            border-top-color: var(--secondary-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- ==================== HTML STRUCTURE ==================== -->
    
    <!-- Header -->
    <header>
        <div class="container">
            <nav class="navbar">
                <a href="#" class="logo">
                    <div class="logo-icon">SN</div>
                    <div class="logo-text">Shahzad<span>Notes</span></div>
                </a>
                
                <ul class="nav-links">
                    <li><a href="#" id="navHome" class="active">Home</a></li>
                    <li><a href="#" id="navMarket">Notes Market</a></li>
                    <li><a href="#" id="navUpload">Upload Notes</a></li>
                    <li><a href="#" id="navDashboard">My Dashboard</a></li>
                    <li><a href="#" id="navWithdraw">Withdraw</a></li>
                </ul>
                
                <div class="user-section">
                    <div class="user-info" id="userInfo">
                        <div class="user-avatar" id="userAvatar">G</div>
                        <span id="userName">Guest</span>
                    </div>
                    <button class="btn btn-primary" id="loginBtn">Login</button>
                </div>
            </nav>
        </div>
    </header>

    <!-- Commission Badge -->
    <div class="commission-badge">
        <i class="fas fa-percentage"></i> 5% Commission on Every Sale
    </div>

    <!-- Fullscreen Button -->
    <button class="fullscreen-btn" id="fullscreenBtn" title="Toggle Fullscreen">
        <i class="fas fa-expand"></i>
    </button>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Home Section -->
            <section id="homeSection" class="section active">
                <div class="hero">
                    <h1>Premium Educational Notes Marketplace</h1>
                    <p>Buy and sell high-quality educational notes. Upload your notes, earn money, and help others learn. We take only 5% commission per sale.</p>
                    <button class="btn btn-primary btn-lg" id="getStartedBtn">
                        <i class="fas fa-rocket"></i> Get Started
                    </button>
                </div>

                <h2>Featured Notes</h2>
                <div class="notes-grid" id="featuredNotes">
                    <!-- Notes will be loaded here dynamically -->
                </div>
            </section>

            <!-- Notes Market Section -->
            <section id="marketSection" class="section">
                <div class="section-header">
                    <h2>Notes Marketplace</h2>
                    <div class="filters">
                        <select id="categoryFilter" class="form-control">
                            <option value="all">All Categories</option>
                            <option value="school">School Notes</option>
                            <option value="college">College Notes</option>
                            <option value="competitive">Competitive Exams</option>
                        </select>
                        <select id="priceFilter" class="form-control">
                            <option value="all">All Prices</option>
                            <option value="free">Free Notes</option>
                            <option value="paid">Paid Notes</option>
                        </select>
                    </div>
                </div>
                <div class="notes-grid" id="marketNotes">
                    <!-- Market notes will be loaded here -->
                </div>
            </section>

            <!-- Upload Notes Section -->
            <section id="uploadSection" class="section">
                <h2>Upload Your Notes</h2>
                <p>Upload your notes and start earning. We take 5% commission on every sale.</p>
                
                <div class="upload-form">
                    <form id="noteUploadForm">
                        <div class="form-group">
                            <label for="uploadTitle">Note Title *</label>
                            <input type="text" id="uploadTitle" required placeholder="Enter note title">
                        </div>
                        
                        <div class="form-group">
                            <label for="uploadDescription">Description *</label>
                            <textarea id="uploadDescription" required rows="4" placeholder="Describe your notes..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label for="uploadCategory">Category *</label>
                            <select id="uploadCategory" required>
                                <option value="">Select Category</option>
                                <option value="school">School Notes (₹0-₹99)</option>
                                <option value="college">College Notes (₹0-₹199)</option>
                                <option value="competitive">Competitive Exams (₹0-₹299)</option>
                                <option value="programming">Programming (₹0-₹499)</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="uploadPrice">Price (₹) *</label>
                            <input type="number" id="uploadPrice" min="0" max="999" value="0" required>
                            <small>Set 0 for free notes</small>
                        </div>
                        
                        <div class="form-group">
                            <label for="uploadFile">Upload PDF File *</label>
                            <div class="file-upload-area" id="fileUploadArea">
                                <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: var(--secondary-color); margin-bottom: 15px;"></i>
                                <p>Click to upload or drag and drop PDF file</p>
                                <p>Max file size: 20MB</p>
                                <input type="file" id="uploadFile" accept=".pdf" hidden>
                            </div>
                            <div id="fileName">No file chosen</div>
                        </div>
                        
                        <div class="commission-notice">
                            <i class="fas fa-info-circle"></i>
                            <span>You will earn 95% of the sale price. 5% commission goes to platform.</span>
                        </div>
                        
                        <button type="submit" class="btn btn-success btn-block">
                            <i class="fas fa-upload"></i> Upload Notes
                        </button>
                    </form>
                </div>
            </section>

            <!-- Dashboard Section -->
            <section id="dashboardSection" class="section">
                <h2>My Dashboard</h2>
                
                <div class="admin-stats">
                    <div class="stat-card">
                        <h3 id="totalEarnings">₹0</h3>
                        <p>Total Earnings</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="totalNotes">0</h3>
                        <p>Notes Uploaded</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="totalSales">0</h3>
                        <p>Total Sales</p>
                    </div>
                    <div class="stat-card">
                        <h3 id="commissionEarned">₹0</h3>
                        <p>Commission Earned</p>
                    </div>
                </div>
                
                <h3>My Uploaded Notes</h3>
                <div class="notes-grid" id="myNotesGrid">
                    <!-- User's notes will be loaded here -->
                </div>
            </section>

            <!-- Withdrawal Section -->
            <section id="withdrawSection" class="section">
                <h2>Withdraw Earnings</h2>
                
                <div class="balance-display">
                    <p>Available Balance</p>
                    <div class="balance-amount" id="availableBalance">₹0</div>
                    <p>Minimum withdrawal: ₹100</p>
                </div>
                
                <div class="withdrawal-form">
                    <form id="withdrawForm">
                        <div class="form-group">
                            <label for="withdrawAmount">Amount to Withdraw (₹)</label>
                            <input type="number" id="withdrawAmount" min="100" step="10" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="paymentMethod">Payment Method</label>
                            <select id="paymentMethod" required>
                                <option value="">Select Method</option>
                                <option value="upi">UPI</option>
                                <option value="bank">Bank Transfer</option>
                            </select>
                        </div>
                        
                        <div class="form-group" id="upiDetails" style="display: none;">
                            <label for="upiId">UPI ID</label>
                            <input type="text" id="upiId" placeholder="yourname@upi">
                        </div>
                        
                        <div class="form-group" id="bankDetails" style="display: none;">
                            <label for="accountNumber">Account Number</label>
                            <input type="text" id="accountNumber" placeholder="Enter account number">
                            <label for="ifscCode">IFSC Code</label>
                            <input type="text" id="ifscCode" placeholder="Enter IFSC code">
                        </div>
                        
                        <button type="submit" class="btn btn-success btn-block">
                            <i class="fas fa-rupee-sign"></i> Request Withdrawal
                        </button>
                    </form>
                </div>
            </section>
        </div>
    </main>

    <!-- PDF Preview Modal -->
    <div class="pdf-preview-container" id="pdfPreview">
        <div class="pdf-preview">
            <div class="pdf-header">
                <h3 id="pdfTitle">PDF Preview</h3>
                <button class="btn btn-outline" id="closePdf">
                    <i class="fas fa-times"></i> Close
                </button>
            </div>
            <div class="pdf-viewer" id="pdfViewer">
                <canvas id="pdf-canvas"></canvas>
                <div id="pageInfo">
                    <button class="btn btn-small" id="prevPage">Previous</button>
                    <span id="pageNum"></span> / <span id="pageCount"></span>
                    <button class="btn btn-small" id="nextPage">Next</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div class="payment-modal" id="paymentModal">
        <div class="payment-content">
            <h3>Complete Payment</h3>
            <p>To download: <span id="paymentNoteTitle"></span></p>
            <div class="payment-amount" id="paymentAmount">₹0</div>
            
            <div class="qr-code-container">
                <p>Scan this QR code to pay:</p>
                <!-- YOUR PHONEPE QR CODE HERE -->
                <img src="https://img.sanishtech.com/u/b54bf7f6c6ea2afa005443f37aad3e6a.png" 
                     alt="PhonePe QR Code" 
                     style="width: 200px; height: 200px; margin: 15px auto; display: block;">
                <p><strong>UPI ID: 9608449213@ybl</strong></p>
                <p>Shahzad Ansari</p>
            </div>
            
            <div class="payment-instructions">
                <p><i class="fas fa-info-circle"></i> After payment, share screenshot on WhatsApp for verification</p>
                <p>WhatsApp: <strong>+91 9608449213</strong></p>
            </div>
            
            <div style="display: flex; gap: 15px; margin-top: 30px;">
                <button class="btn btn-success" id="confirmPayment">
                    <i class="fas fa-check"></i> I've Paid
                </button>
                <button class="btn btn-outline" id="cancelPayment">
                    <i class="fas fa-times"></i> Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div class="payment-modal" id="loginModal">
        <div class="payment-content">
            <h3>Login / Sign Up</h3>
            <form id="authForm">
                <div class="form-group">
                    <label for="authEmail">Email Address *</label>
                    <input type="email" id="authEmail" required>
                </div>
                
                <div class="form-group">
                    <label for="authPassword">Password *</label>
                    <input type="password" id="authPassword" required>
                </div>
                
                <div class="form-group">
                    <label for="authName">Full Name (for new users)</label>
                    <input type="text" id="authName">
                </div>
                
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="rememberMe"> Remember me
                    </label>
                </div>
                
                <button type="submit" class="btn btn-primary btn-block" id="authSubmit">
                    Login / Sign Up
                </button>
                
                <p style="text-align: center; margin-top: 15px;">
                    <small>By continuing, you agree to our Terms & Conditions</small>
                </p>
            </form>
        </div>
    </div>

    <!-- Chat Widget -->
    <div class="chat-widget">
        <button class="chat-button" id="chatButton">
            <i class="fas fa-comment"></i>
        </button>
        <div class="ai-chat-container" id="aiChat">
            <div class="ai-chat-header">
                <span><i class="fas fa-robot"></i> AI Study Assistant</span>
                <button class="btn btn-small" id="closeChat">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="ai-chat-body" id="chatMessages">
                <div class="message ai">
                    <p>Hello! I'm your AI study assistant. Ask me anything about the notes or request a summary!</p>
                </div>
            </div>
            <div class="ai-chat-input">
                <input type="text" id="chatInput" placeholder="Ask about notes...">
                <button class="btn btn-primary" id="sendMessage">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Notification Container -->
    <div id="notificationContainer"></div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>About Shahzad Notes</h3>
                    <p>A premium educational platform connecting students and educators. Quality notes at affordable prices.</p>
                </div>
                
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <a href="#homeSection" style="color: rgba(255,255,255,0.8); text-decoration: none;">Home</a>
                        <a href="#marketSection" style="color: rgba(255,255,255,0.8); text-decoration: none;">Notes Market</a>
                        <a href="#uploadSection" style="color: rgba(255,255,255,0.8); text-decoration: none;">Upload Notes</a>
                        <a href="#withdrawSection" style="color: rgba(255,255,255,0.8); text-decoration: none;">Withdraw Earnings</a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <div class="contact-info">
                        <div class="contact-item">
                            <i class="fas fa-user"></i>
                            <span>Shahzad Ansari</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-envelope"></i>
                            <span>shahjadansari9235@gmail.com</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-phone"></i>
                            <span>+91 9608449213</span>
                        </div>
                        <div class="contact-item">
                            <i class="fas fa-university"></i>
                            <span>UPI: 9608449213@ybl</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="copyright">
                <p>&copy; 2023 Shahzad Notes. All rights reserved. | 5% commission on all sales</p>
            </div>
        </div>
    </footer>

    <!-- ==================== ALL JAVASCRIPT IN ONE PLACE ==================== -->
    <script>
        // ============================================
        // COMPLETE JAVASCRIPT APPLICATION
        // ============================================
        
        // Global Variables
        let currentUser = null;
        let currentNoteForPayment = null;
        let pdfDocument = null;
        let currentPage = 1;
        let notesData = [];
        let transactions = [];
        
        // Sample Data
        const sampleNotes = [
            {
                id: 1,
                title: "Class 12 Physics Complete Notes",
                description: "Comprehensive physics notes covering all chapters of Class 12 CBSE syllabus with diagrams, formulas, and solved examples.",
                price: 49,
                category: "school",
                subject: "Physics",
                uploader: "Shahzad A.",
                uploaderId: "admin",
                uploadDate: "2023-10-15",
                isFree: false,
                downloads: 124,
                rating: 4.8,
                fileSize: "4.2 MB",
                fileUrl: "physics_notes.pdf",
                pages: 45,
                content: "Physics is the study of matter, energy, and their interactions..."
            },
            {
                id: 2,
                title: "JavaScript Programming Basics - FREE",
                description: "Learn JavaScript from scratch. Perfect for beginners. Includes variables, functions, DOM manipulation, and projects.",
                price: 0,
                category: "programming",
                subject: "JavaScript",
                uploader: "Web Master",
                uploaderId: "webmaster",
                uploadDate: "2023-10-10",
                isFree: true,
                downloads: 342,
                rating: 4.9,
                fileSize: "3.1 MB",
                fileUrl: "javascript_basics.pdf",
                pages: 32,
                content: "JavaScript is a programming language used for web development..."
            },
            {
                id: 3,
                title: "Mathematics Formulas Class 10",
                description: "All important mathematics formulas for Class 10 with examples and practice problems.",
                price: 29,
                category: "school",
                subject: "Mathematics",
                uploader: "Math Guru",
                uploaderId: "mathguru",
                uploadDate: "2023-10-05",
                isFree: false,
                downloads: 89,
                rating: 4.7,
                fileSize: "2.8 MB",
                fileUrl: "math_formulas.pdf",
                pages: 28,
                content: "Algebra, Geometry, Trigonometry formulas with examples..."
            },
            {
                id: 4,
                title: "Biology Diagrams and Notes",
                description: "Detailed biology notes with labeled diagrams for better understanding.",
                price: 0,
                category: "school",
                subject: "Biology",
                uploader: "Bio Expert",
                uploaderId: "bioexpert",
                uploadDate: "2023-09-28",
                isFree: true,
                downloads: 156,
                rating: 4.6,
                fileSize: "5.1 MB",
                fileUrl: "biology_notes.pdf",
                pages: 40,
                content: "Human anatomy, plant biology, and cellular structure diagrams..."
            }
        ];
        
        // Initialize Application
        document.addEventListener('DOMContentLoaded', function() {
            initApp();
            setupEventListeners();
            loadSampleData();
            updateStats();
        });
        
        function initApp() {
            // Load user from localStorage
            const savedUser = localStorage.getItem('shahzadNotesUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserInfo();
                showNotification('Welcome back, ' + currentUser.name + '!', 'success');
            }
            
            // Load data from localStorage
            loadDataFromStorage();
            
            // Check for new day to update earnings
            checkDailyUpdate();
        }
        
        function loadDataFromStorage() {
            // Load notes
            const savedNotes = localStorage.getItem('shahzadNotesData');
            if (savedNotes) {
                notesData = JSON.parse(savedNotes);
            }
            
            // Load transactions
            const savedTransactions = localStorage.getItem('shahzadNotesTransactions');
            if (savedTransactions) {
                transactions = JSON.parse(savedTransactions);
            }
        }
        
        function saveDataToStorage() {
            localStorage.setItem('shahzadNotesData', JSON.stringify(notesData));
            localStorage.setItem('shahzadNotesTransactions', JSON.stringify(transactions));
        }
        
        function loadSampleData() {
            // Add sample notes if none exist
            if (notesData.length === 0) {
                notesData = [...sampleNotes];
                saveDataToStorage();
            }
            
            renderAllNotes();
        }
        
        function renderAllNotes() {
            renderFeaturedNotes();
            renderMarketNotes();
            if (currentUser) {
                renderMyNotes();
            }
        }
        
        function renderFeaturedNotes() {
            const container = document.getElementById('featuredNotes');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Get 4 featured notes
            const featured = notesData.slice(0, 4);
            featured.forEach(note => {
                container.appendChild(createNoteCard(note, 'featured'));
            });
        }
        
        function renderMarketNotes() {
            const container = document.getElementById('marketNotes');
            if (!container) return;
            
            container.innerHTML = '';
            
            // Apply filters
            const categoryFilter = document.getElementById('categoryFilter')?.value || 'all';
            const priceFilter = document.getElementById('priceFilter')?.value || 'all';
            
            let filteredNotes = [...notesData];
            
            if (categoryFilter !== 'all') {
                filteredNotes = filteredNotes.filter(note => note.category === categoryFilter);
            }
            
            if (priceFilter === 'free') {
                filteredNotes = filteredNotes.filter(note => note.price === 0);
            } else if (priceFilter === 'paid') {
                filteredNotes = filteredNotes.filter(note => note.price > 0);
            }
            
            filteredNotes.forEach(note => {
                container.appendChild(createNoteCard(note, 'market'));
            });
        }
        
        function renderMyNotes() {
            const container = document.getElementById('myNotesGrid');
            if (!container || !currentUser) return;
            
            container.innerHTML = '';
            
            const myNotes = notesData.filter(note => note.uploaderId === currentUser.id);
            
            if (myNotes.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1 / -1; text-align: center; padding: 40px; background: white; border-radius: 12px;">
                        <i class="fas fa-cloud-upload-alt" style="font-size: 3rem; color: #ccc; margin-bottom: 15px;"></i>
                        <h3 style="color: #666; margin-bottom: 10px;">No notes uploaded yet</h3>
                        <p style="color: #888; margin-bottom: 20px;">Upload your first notes to start earning!</p>
                        <button class="btn btn-primary" id="uploadFirstNote">
                            <i class="fas fa-upload"></i> Upload Your First Note
                        </button>
                    </div>
                `;
                
                document.getElementById('uploadFirstNote')?.addEventListener('click', () => {
                    showSection('uploadSection');
                    setActiveNav('navUpload');
                });
            } else {
                myNotes.forEach(note => {
                    container.appendChild(createNoteCard(note, 'my'));
                });
            }
        }
        
        function createNoteCard(note, context) {
            const card = document.createElement('div');
            card.className = 'note-card';
            card.dataset.id = note.id;
            
            const isFree = note.price === 0;
            
            card.innerHTML = `
                <div class="note-header">
                    <div class="note-title">${note.title}</div>
                    <div class="note-price">${isFree ? 'FREE' : '₹' + note.price}</div>
                    <div style="font-size: 0.9rem; opacity: 0.9;">${note.subject} • ${note.uploader}</div>
                </div>
                <div class="note-body">
                    <p class="note-description">${note.description}</p>
                    <div style="display: flex; justify-content: space-between; font-size: 0.9rem; color: #666; margin-top: 15px;">
                        <span><i class="fas fa-download"></i> ${note.downloads} downloads</span>
                        <span><i class="fas fa-star"></i> ${note.rating}</span>
                        <span><i class="fas fa-file-pdf"></i> ${note.fileSize}</span>
                    </div>
                </div>
                <div class="note-footer">
                    ${context === 'my' ? `
                        <button class="btn btn-outline btn-small view-stats-btn">
                            <i class="fas fa-chart-bar"></i> Stats
                        </button>
                        <button class="btn btn-outline btn-small edit-note-btn">
                            <i class="fas fa-edit"></i> Edit
                        </button>
                        <button class="btn btn-outline btn-small delete-note-btn">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    ` : `
                        <button class="btn ${isFree ? 'btn-success' : 'btn-primary'} btn-small download-btn">
                            <i class="fas fa-download"></i> ${isFree ? 'Download Free' : 'Buy Now'}
                        </button>
                        <button class="btn btn-outline btn-small preview-btn">
                            <i class="fas fa-eye"></i> Preview
                        </button>
                    `}
                </div>
            `;
            
            // Add event listeners
            if (context === 'my') {
                const statsBtn = card.querySelector('.view-stats-btn');
                const editBtn = card.querySelector('.edit-note-btn');
                const deleteBtn = card.querySelector('.delete-note-btn');
                
                statsBtn.addEventListener('click', () => showNoteStats(note.id));
                editBtn.addEventListener('click', () => editNote(note.id));
                deleteBtn.addEventListener('click', () => deleteNote(note.id));
            } else {
                const downloadBtn = card.querySelector('.download-btn');
                const previewBtn = card.querySelector('.preview-btn');
                
                downloadBtn.addEventListener('click', () => handleDownload(note.id));
                previewBtn.addEventListener('click', () => previewNote(note));
            }
            
            return card;
        }
        
        function handleDownload(noteId) {
            const note = notesData.find(n => n.id === noteId);
            if (!note) return;
            
            if (note.price === 0) {
                // Free download
                downloadNote(note);
            } else {
                // Paid note - show payment modal
                currentNoteForPayment = note;
                document.getElementById('paymentNoteTitle').textContent = note.title;
                document.getElementById('paymentAmount').textContent = '₹' + note.price;
                document.getElementById('paymentModal').classList.add('active');
            }
        }
        
        function downloadNote(note) {
            // In real app, this would download the actual PDF
            // For demo, we'll simulate it
            
            showNotification(`Starting download: "${note.title}"`, 'info');
            
            // Update download count
            note.downloads = (note.downloads || 0) + 1;
            
            // Record transaction for paid notes
            if (note.price > 0) {
                const transaction = {
                    id: Date.now(),
                    noteId: note.id,
                    noteTitle: note.title,
                    buyerId: currentUser?.id || 'guest',
                    buyerName: currentUser?.name || 'Guest',
                    amount: note.price,
                    commission: note.price * 0.05, // 5% commission
                    uploaderEarning: note.price * 0.95, // 95% to uploader
                    date: new Date().toISOString(),
                    status: 'completed'
                };
                
                transactions.unshift(transaction);
                
                // Update uploader's earnings
                if (note.uploaderId && note.uploaderId !== (currentUser?.id || 'guest')) {
                    const uploaderKey = 'shahzadNotesUser_' + note.uploaderId;
                    let uploader = JSON.parse(localStorage.getItem(uploaderKey));
                    if (uploader) {
                        uploader.earnings = (uploader.earnings || 0) + transaction.uploaderEarning;
                        localStorage.setItem(uploaderKey, JSON.stringify(uploader));
                    }
                }
                
                // Update admin commission
                updateAdminCommission(transaction.commission);
                
                showNotification(`Payment successful! ₹${transaction.uploaderEarning} credited to uploader.`, 'success');
            }
            
            saveDataToStorage();
            
            // Simulate download completion
            setTimeout(() => {
                showNotification(`Download complete: "${note.title}"`, 'success');
                
                // Show PDF preview after download
                previewNote(note);
            }, 2000);
            
            // Update UI
            renderAllNotes();
            updateStats();
        }
        
        function previewNote(note) {
            // Show PDF preview modal
            document.getElementById('pdfTitle').textContent = note.title + ' - Preview';
            document.getElementById('pdfPreview').classList.add('active');
            
            const canvas = document.getElementById('pdf-canvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size
            canvas.width = 800;
            canvas.height = 1000;
            
            // Draw sample PDF content
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Draw sample text
            ctx.fillStyle = '#333';
            ctx.font = '24px Arial';
            ctx.fillText(note.title, 50, 100);
            
            ctx.font = '16px Arial';
            ctx.fillText('Subject: ' + note.subject, 50, 150);
            ctx.fillText('Uploader: ' + note.uploader, 50, 180);
            ctx.fillText('Pages: ' + (note.pages || '30'), 50, 210);
            ctx.fillText('Price: ' + (note.price === 0 ? 'FREE' : '₹' + note.price), 50, 240);
            
            // Draw sample content
            ctx.font = '14px Arial';
            let y = 280;
            const lines = note.content ? note.content.split('. ') : [
                'This is a sample preview of the notes content.',
                'In the actual PDF, you would see the complete notes.',
                'The notes cover important topics with examples.',
                'Perfect for exam preparation and quick revision.',
                'Download the full PDF to access all content.'
            ];
            
            for (let i = 0; i < Math.min(lines.length, 15); i++) {
                ctx.fillText('• ' + lines[i], 50, y);
                y += 25;
            }
            
            // Update page info
            document.getElementById('pageNum').textContent = '1';
            document.getElementById('pageCount').textContent = note.pages || '30';
        }
        
        function updateUserInfo() {
            if (!currentUser) return;
            
            document.getElementById('userName').textContent = currentUser.name;
            document.getElementById('userAvatar').textContent = currentUser.name.charAt(0).toUpperCase();
            document.getElementById('loginBtn').textContent = 'Logout';
            
            // Update user stats
            updateUserStats();
        }
        
        function updateStats() {
            // Platform stats
            const totalNotes = notesData.length;
            const totalDownloads = notesData.reduce((sum, note) => sum + note.downloads, 0);
            const totalCommission = transactions.reduce((sum, t) => sum + t.commission, 0);
            
            document.getElementById('totalNotes').textContent = totalNotes;
            document.getElementById('totalSales').textContent = transactions.length;
            document.getElementById('commissionEarned').textContent = '₹' + totalCommission;
            
            // User stats
            updateUserStats();
        }
        
        function updateUserStats() {
            if (!currentUser) return;
            
            const userNotes = notesData.filter(note => note.uploaderId === currentUser.id);
            const userTransactions = transactions.filter(t => 
                notesData.some(n => n.id === t.noteId && n.uploaderId === currentUser.id)
            );
            
            const userEarnings = userTransactions.reduce((sum, t) => sum + t.uploaderEarning, 0);
            const userDownloads = userNotes.reduce((sum, note) => sum + note.downloads, 0);
            
            document.getElementById('totalEarnings').textContent = '₹' + userEarnings;
            document.getElementById('availableBalance').textContent = '₹' + userEarnings;
        }
        
        function updateAdminCommission(amount) {
            const adminKey = 'shahzadNotesAdmin';
            let adminData = JSON.parse(localStorage.getItem(adminKey)) || {
                totalCommission: 0,
                transactions: []
            };
            
            adminData.totalCommission = (adminData.totalCommission || 0) + amount;
            adminData.transactions.push({
                amount: amount,
                date: new Date().toISOString(),
                note: currentNoteForPayment?.title
            });
            
            localStorage.setItem(adminKey, JSON.stringify(adminData));
        }
        
        function showNotification(message, type = 'info') {
            const container = document.getElementById('notificationContainer');
            
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'}"></i>
                <span>${message}</span>
            `;
            
            container.appendChild(notification);
            
            // Show with animation
            setTimeout(() => notification.classList.add('show'), 10);
            
            // Auto remove after 5 seconds
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 5000);
        }
        
        function setupEventListeners() {
            // Navigation
            setupNavigation();
            
            // Login/Logout
            document.getElementById('loginBtn').addEventListener('click', function() {
                if (currentUser) {
                    logoutUser();
                } else {
                    showLoginModal();
                }
            });
            
            // Payment
            document.getElementById('confirmPayment').addEventListener('click', () => {
                if (currentNoteForPayment) {
                    downloadNote(currentNoteForPayment);
                    document.getElementById('paymentModal').classList.remove('active');
                }
            });
            
            document.getElementById('cancelPayment').addEventListener('click', () => {
                document.getElementById('paymentModal').classList.remove('active');
                currentNoteForPayment = null;
            });
            
            // PDF Preview
            document.getElementById('closePdf').addEventListener('click', () => {
                document.getElementById('pdfPreview').classList.remove('active');
            });
            
            document.getElementById('prevPage').addEventListener('click', () => {
                if (currentPage > 1) {
                    currentPage--;
                    renderPDFPage();
                }
            });
            
            document.getElementById('nextPage').addEventListener('click', () => {
                if (pdfDocument && currentPage < pdfDocument.numPages) {
                    currentPage++;
                    renderPDFPage();
                }
            });
            
            // File Upload
            const fileUploadArea = document.getElementById('fileUploadArea');
            const uploadFileInput = document.getElementById('uploadFile');
            const fileNameDisplay = document.getElementById('fileName');
            
            fileUploadArea.addEventListener('click', () => {
                uploadFileInput.click();
            });
            
            uploadFileInput.addEventListener('change', () => {
                if (uploadFileInput.files.length > 0) {
                    const file = uploadFileInput.files[0];
                    const fileSizeMB = (file.size / (1024 * 1024)).toFixed(2);
                    fileNameDisplay.textContent = file.name + ' (' + fileSizeMB + ' MB)';
                    
                    // Validate file size
                    if (file.size > 20 * 1024 * 1024) {
                        showNotification('File size exceeds 20MB limit', 'error');
                        uploadFileInput.value = '';
                        fileNameDisplay.textContent = 'No file chosen';
                    }
                }
            });
            
            // Note Upload Form
            document.getElementById('noteUploadForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                if (!currentUser) {
                    showLoginModal();
                    return;
                }
                
                const title = document.getElementById('uploadTitle').value;
                const description = document.getElementById('uploadDescription').value;
                const category = document.getElementById('uploadCategory').value;
                const price = parseInt(document.getElementById('uploadPrice').value);
                const file = uploadFileInput.files[0];
                
                if (!file) {
                    showNotification('Please select a PDF file to upload', 'error');
                    return;
                }
                
                if (!title || !description || !category) {
                    showNotification('Please fill all required fields', 'error');
                    return;
                }
                
                // Create new note
                const newNote = {
                    id: Date.now(),
                    title: title,
                    description: description,
                    price: price,
                    category: category,
                    subject: category,
                    uploader: currentUser.name,
                    uploaderId: currentUser.id,
                    uploadDate: new Date().toISOString().split('T')[0],
                    isFree: price === 0,
                    downloads: 0,
                    rating: 0,
                    fileSize: (file.size / (1024 * 1024)).toFixed(1) + ' MB',
                    fileUrl: file.name,
                    pages: Math.floor(Math.random() * 50) + 20,
                    content: description + ' This note covers important topics...'
                };
                
                notesData.unshift(newNote);
                saveDataToStorage();
                
                // Reset form
                e.target.reset();
                fileNameDisplay.textContent = 'No file chosen';
                
                showNotification('Notes uploaded successfully! You will earn 95% of each sale.', 'success');
                renderAllNotes();
                
                // Switch to market section
                showSection('marketSection');
                setActiveNav('navMarket');
            });
            
            // Withdrawal Form
            document.getElementById('paymentMethod').addEventListener('change', function() {
                const method = this.value;
                document.getElementById('upiDetails').style.display = method === 'upi' ? 'block' : 'none';
                document.getElementById('bankDetails').style.display = method === 'bank' ? 'block' : 'none';
            });
            
            document.getElementById('withdrawForm').addEventListener('submit', (e) => {
                e.preventDefault();
                
                if (!currentUser) {
                    showLoginModal();
                    return;
                }
                
                const amount = parseFloat(document.getElementById('withdrawAmount').value);
                const method = document.getElementById('paymentMethod').value;
                const upiId = document.getElementById('upiId')?.value || '';
                const accountNumber = document.getElementById('accountNumber')?.value || '';
                
                if (amount < 100) {
                    showNotification('Minimum withdrawal amount is ₹100', 'error');
                    return;
                }
                
                // Check user balance
                const userTransactions = transactions.filter(t => 
                    notesData.some(n => n.id === t.noteId && n.uploaderId === currentUser.id)
                );
                const userEarnings = userTransactions.reduce((sum, t) => sum + t.uploaderEarning, 0);
                
                if (amount > userEarnings) {
                    showNotification('Insufficient balance', 'error');
                    return;
                }
                
                // Process withdrawal
                const withdrawal = {
                    id: 'WTH_' + Date.now(),
                    userId: currentUser.id,
                    amount: amount,
                    method: method,
                    upiId: upiId,
                    accountNumber: accountNumber,
                    date: new Date().toISOString(),
                    status: 'pending'
                };
                
                // Save withdrawal
                const withdrawals = JSON.parse(localStorage.getItem('shahzadNotesWithdrawals') || '[]');
                withdrawals.unshift(withdrawal);
                localStorage.setItem('shahzadNotesWithdrawals', JSON.stringify(withdrawals));
                
                showNotification(`Withdrawal request of ₹${amount} submitted. It will be processed within 24 hours.`, 'success');
                
                // Reset form
                e.target.reset();
                document.getElementById('upiDetails').style.display = 'none';
                document.getElementById('bankDetails').style.display = 'none';
            });
            
            // AI Chat
            document.getElementById('chatButton').addEventListener('click', () => {
                document.getElementById('aiChat').classList.toggle('active');
            });
            
            document.getElementById('closeChat').addEventListener('click', () => {
                document.getElementById('aiChat').classList.remove('active');
            });
            
            document.getElementById('sendMessage').addEventListener('click', sendChatMessage);
            document.getElementById('chatInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    sendChatMessage();
                }
            });
            
            // Fullscreen toggle
            document.getElementById('fullscreenBtn').addEventListener('click', toggleFullscreen);
            
            // Filters
            document.getElementById('categoryFilter')?.addEventListener('change', renderMarketNotes);
            document.getElementById('priceFilter')?.addEventListener('change', renderMarketNotes);
            
            // Get Started button
            document.getElementById('getStartedBtn')?.addEventListener('click', () => {
                if (!currentUser) {
                    showLoginModal();
                } else {
                    showSection('uploadSection');
                    setActiveNav('navUpload');
                }
            });
        }
        
        function setupNavigation() {
            const navItems = [
                { id: 'navHome', section: 'homeSection' },
                { id: 'navMarket', section: 'marketSection' },
                { id: 'navUpload', section: 'uploadSection' },
                { id: 'navDashboard', section: 'dashboardSection' },
                { id: 'navWithdraw', section: 'withdrawSection' }
            ];
            
            navItems.forEach(item => {
                document.getElementById(item.id).addEventListener('click', (e) => {
                    e.preventDefault();
                    showSection(item.section);
                    setActiveNav(item.id);
                });
            });
        }
        
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        function setActiveNav(navId) {
            // Remove active from all nav items
            document.querySelectorAll('.nav-links a').forEach(nav => {
                nav.classList.remove('active');
            });
            
            // Add active to clicked nav
            document.getElementById(navId).classList.add('active');
        }
        
        function showLoginModal() {
            document.getElementById('loginModal').classList.add('active');
            
            // Setup form submission
            const authForm = document.getElementById('authForm');
            authForm.onsubmit = (e) => {
                e.preventDefault();
                
                const email = document.getElementById('authEmail').value;
                const password = document.getElementById('authPassword').value;
                const name = document.getElementById('authName').value;
                
                if (!email || !password) {
                    showNotification('Please enter email and password', 'error');
                    return;
                }
                
                // Simulate login/signup
                if (name) {
                    // Sign up
                    currentUser = {
                        id: 'user_' + Date.now(),
                        email: email,
                        name: name,
                        joinDate: new Date().toISOString().split('T')[0],
                        earnings: 0
                    };
                    
                    localStorage.setItem('shahzadNotesUser', JSON.stringify(currentUser));
                    showNotification('Account created successfully! Welcome ' + name, 'success');
                } else {
                    // Login
                    // Check if user exists
                    const existingUser = JSON.parse(localStorage.getItem('shahzadNotesUser'));
                    if (existingUser && existingUser.email === email) {
                        currentUser = existingUser;
                    } else {
                        // Create new user for demo
                        currentUser = {
                            id: 'user_' + Date.now(),
                            email: email,
                            name: email.split('@')[0],
                            joinDate: new Date().toISOString().split('T')[0],
                            earnings: 0
                        };
                        localStorage.setItem('shahzadNotesUser', JSON.stringify(currentUser));
                    }
                    
                    showNotification('Welcome back!', 'success');
                }
                
                updateUserInfo();
                document.getElementById('loginModal').classList.remove('active');
                authForm.reset();
                
                // Update UI
                renderAllNotes();
                updateStats();
            };
        }
        
        function logoutUser() {
            if (confirm('Are you sure you want to logout?')) {
                currentUser = null;
                localStorage.removeItem('shahzadNotesUser');
                
                document.getElementById('userName').textContent = 'Guest';
                document.getElementById('userAvatar').textContent = 'G';
                document.getElementById('loginBtn').textContent = 'Login';
                
                showNotification('Logged out successfully', 'info');
                showSection('homeSection');
                setActiveNav('navHome');
            }
        }
        
        function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            // Add user message
            addChatMessage(message, 'user');
            input.value = '';
            
            // Show typing indicator
            const typingIndicator = document.createElement('div');
            typingIndicator.className = 'message ai typing';
            typingIndicator.innerHTML = '<p><i>AI is typing...</i></p>';
            document.getElementById('chatMessages').appendChild(typingIndicator);
            
            // Simulate AI thinking
            setTimeout(() => {
                // Remove typing indicator
                typingIndicator.remove();
                
                // Generate AI response
                let response = '';
                
                if (message.toLowerCase().includes('commission')) {
                    response = "The platform charges 5% commission on each sale. Uploaders receive 95% of the sale price.";
                } else if (message.toLowerCase().includes('price') || message.toLowerCase().includes('cost')) {
                    response = "Notes prices range from ₹0 (free) to ₹999. School notes are typically ₹0-₹99, college notes ₹0-₹199, competitive exams ₹0-₹299, and programming notes ₹0-₹499.";
                } else if (message.toLowerCase().includes('download') || message.toLowerCase().includes('free')) {
                    response = "Free notes can be downloaded immediately. Paid notes require payment via UPI to 9608449213@ybl. After payment, share screenshot on WhatsApp for verification.";
                } else if (message.toLowerCase().includes('withdraw') || message.toLowerCase().includes('earn')) {
                    response = "You can withdraw your earnings by going to the Withdraw section. Minimum withdrawal is ₹100. Earnings are sent to your UPI or bank account within 24 hours.";
                } else if (message.toLowerCase().includes('upload')) {
                    response = "To upload notes: 1) Go to Upload section 2) Fill note details 3) Upload PDF file 4) Set price (0 for free) 5) Submit. You'll earn 95% of each sale!";
                } else if (message.toLowerCase().includes('summary') || message.toLowerCase().includes('summarize')) {
                    response = "I can summarize notes! Please upload the notes or paste the text, and I'll provide a concise summary with key points.";
                } else {
                    const responses = [
                        "I can help you with notes, payments, withdrawals, and summaries. What would you like to know?",
                        "This platform helps students and educators share knowledge. Uploaders earn 95% of sales!",
                        "All payments go to UPI ID: 9608449213@ybl (Shahzad Ansari). Share payment screenshot on WhatsApp for verification.",
                        "You need to login to upload notes or access your dashboard. Click the login button to get started!",
                        "The AI assistant can help summarize notes and answer questions about the platform."
                    ];
                    response = responses[Math.floor(Math.random() * responses.length)];
                }
                
                addChatMessage(response, 'ai');
            }, 1500);
        }
        
        function addChatMessage(text, sender) {
            const container = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            messageDiv.innerHTML = `<p>${text}</p>`;
            container.appendChild(messageDiv);
            container.scrollTop = container.scrollHeight;
        }
        
        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
                document.body.classList.add('fullscreen');
                document.getElementById('fullscreenBtn').innerHTML = '<i class="fas fa-compress"></i>';
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                    document.body.classList.remove('fullscreen');
                    document.getElementById('fullscreenBtn').innerHTML = '<i class="fas fa-expand"></i>';
                }
            }
        }
        
        function showNoteStats(noteId) {
            const note = notesData.find(n => n.id === noteId);
            if (!note) return;
            
            const earnings = note.downloads * note.price * 0.95;
            const commission = note.downloads * note.price * 0.05;
            
            alert(`📊 Statistics for "${note.title}":\n\n` +
                  `• Downloads: ${note.downloads}\n` +
                  `• Earnings: ₹${earnings.toFixed(2)}\n` +
                  `• Commission Paid: ₹${commission.toFixed(2)}\n` +
                  `• Rating: ${note.rating}/5\n` +
                  `• Upload Date: ${note.uploadDate}\n\n` +
                  `💡 Tip: Share your notes link to get more downloads!`);
        }
        
        function editNote(noteId) {
            const note = notesData.find(n => n.id === noteId);
            if (!note) return;
            
            // Pre-fill form with note data
            document.getElementById('uploadTitle').value = note.title;
            document.getElementById('uploadDescription').value = note.description;
            document.getElementById('uploadCategory').value = note.category;
            document.getElementById('uploadPrice').value = note.price;
            
            // Switch to upload section
            showSection('uploadSection');
            setActiveNav('navUpload');
            
            showNotification('Edit your note details and click Upload to update', 'info');
        }
        
        function deleteNote(noteId) {
            if (confirm('Are you sure you want to delete this note? This action cannot be undone.')) {
                notesData = notesData.filter(n => n.id !== noteId);
                saveDataToStorage();
                renderAllNotes();
                showNotification('Note deleted successfully', 'success');
            }
        }
        
        function renderPDFPage() {
            // This would render actual PDF pages using pdf.js
            // For demo, we'll just update the page number
            document.getElementById('pageNum').textContent = currentPage;
        }
        
        function checkDailyUpdate() {
            const lastUpdate = localStorage.getItem('shahzadNotesLastUpdate');
            const today = new Date().toDateString();
            
            if (lastUpdate !== today) {
                // Update daily stats or perform maintenance
                localStorage.setItem('shahzadNotesLastUpdate', today);
                
                // Simulate daily commission calculation
                const adminData = JSON.parse(localStorage.getItem('shahzadNotesAdmin') || '{}');
                if (adminData.totalCommission > 0) {
                    console.log(`💰 Daily commission total: ₹${adminData.totalCommission}`);
                }
            }
        }
        
        // WhatsApp Integration
        function openWhatsApp(message = '') {
            const phoneNumber = '919608449213';
            const url = `https://wa.me/${phoneNumber}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }
        
        // Add WhatsApp link to payment instructions
        document.querySelector('.payment-instructions')?.addEventListener('click', function(e) {
            if (e.target.tagName === 'STRONG') {
                const noteTitle = currentNoteForPayment?.title || 'Notes Purchase';
                const amount = currentNoteForPayment?.price || 0;
                const message = `Payment for ${noteTitle} - ₹${amount}\nTransaction ID: TXN_${Date.now()}\nUPI: 9608449213@ybl`;
                openWhatsApp(message);
            }
        });
        
        // Export app object for debugging
        window.ShahzadNotes = {
            currentUser,
            notesData,
            transactions,
            renderAllNotes,
            updateStats,
            showNotification,
            openWhatsApp
        };
        
        console.log('🚀 Shahzad Notes Website Loaded Successfully!');
        console.log('📧 Contact: shahjadansari9235@gmail.com');
        console.log('📱 WhatsApp: +91 9608449213');
        console.log('💳 UPI: 9608449213@ybl');
        console.log('💸 Commission Rate: 5%');
    </script>
</body>
</html>
